import random

print ("""Вы гуляете по лесу и вдруг замечаете пещеру. Вы подходите к ней и видите, что из входа в неё идет яркий свет,
Ваши действия:
1 - Войти в пещеру
2 - Уйти""")

x = input('-> ')

if x == '1':
    print('''Вы вошли в пещеру и были чуть ли не ослеплены светом этих... кристаллов! 
Вдруг вы замечаете пьедестал, на котором лежит размером с ладонь белый рубин. 
Он настолько красив, что вы почти не можете от него оторваться.
Ваши действия:
1 - Взять рубин
2 - Пойти по пещере дальше
3 - Разбить рубин''')
    y = input('-> ')
    
    if y == '1':
        print('''Это было сердце рубинового монстра! 
Он выхватывает из ваших рук рубин и ставит в себя. 
Выберите свою судьбу...
1 - Начать сражение
2 - Убежать''')
        z = input('-> ')

        if z == '1':
            # Начало боя
            print('Вы достали свой меч, началась битва с боссом!')
            player_hp = 100
            boss_hp = 150

            while player_hp > 0 and boss_hp > 0:
                print(f'\nВаши жизни: {player_hp}/100')
                print(f'Жизни босса: {boss_hp}/150')
                print('Выберите действие:')
                print('1 - Ударить мечом (15 dmg)')
                print('2 - Выпить зелье лечения (+10 HP)')
                print('3 - Убежать')

                action = input('-> ')

                if action == '1':
                    boss_hp -= 15
                    print(f'Вы ударили босса мечом! Жизни босса: {max(boss_hp, 0)}/150')
                    if boss_hp <= 0:
                        print('Вы убили босса! Игра окончена. Концовка: Идеальная!')
                        break

                elif action == '2':
                    player_hp += 10
                    if player_hp > 100:
                        player_hp = 100
                    print(f'Вы выпили зелье лечения! Ваши жизни: {player_hp}/100')

                elif action == '3':
                    print('Вы убежали с битвы. Игра окончена. Концовка: Обычная.')
                    break

                else:
                    print('Неверный выбор!')
                    continue

                # Ход босса
                if boss_hp > 0:
                    print('\nХод босса!')
                    chance = random.randint(1, 100)

                    if chance <= 60:
                        player_hp -= 10
                        print(f'Босс бьет вас, нанося 10 урона! Ваши жизни: {max(player_hp, 0)}/100')
                        if player_hp <= 0:
                            print('Вы погибли... Игра окончена. Концовка: Ужасная.')
                            break
                    elif chance <= 99:
                        boss_hp += 10
                        if boss_hp > 150:
                            boss_hp = 150
                        print(f'Босс лечится! Жизни босса: {boss_hp}/150')
                    else:
                        print('Босс убежал! Игра окончена. Концовка: Нейтральная.')
                        break

        elif z == '2':
            print('Вы начали убегать, к счастью монстр потерял вас из виду и вы спокойно выбрались из пещеры. Игра окончена. Концовка: Хорошая!')

    elif y == '2':
        print('Вы пошли любоваться красотами пещеры дальше. Всё хорошо. Игра окончена. Концовка: Средняя.')

    elif y == '3':
        print('Вы услышали пронзительный крик — оказывается, вы сломали не обычный рубин, а сердце рубинового монстра, который досаждал вашей деревне уже много лет!')

elif x == '2':
    print('Вы просто продолжили гулять по лесу. Игра окончена. Концовка: Неопределённая.')

if x == '1' and 'y' in locals() and y == '3':
    print('Вы, вернувшись поздно ночью домой, легли спать, но пока вы спали, на вас напали рубиновые стражники — прислуги монстра, и убили вас. Игра окончена. Концовка: Плохая.')

input()
